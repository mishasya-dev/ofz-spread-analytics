# OFZ Spread Analytics

–ê–Ω–∞–ª–∏–∑ —Å–ø—Ä–µ–¥–æ–≤ –æ–±–ª–∏–≥–∞—Ü–∏–π –û–§–ó —Å –¥–∞–Ω–Ω—ã–º–∏ –ú–æ—Å–∫–æ–≤—Å–∫–æ–π –±–∏—Ä–∂–∏ (MOEX).

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

- üìä **16 –û–§–ó –æ–±–ª–∏–≥–∞—Ü–∏–π** —Å –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ ISIN –∫–æ–¥–∞–º–∏
- üìà **–ì—Ä–∞—Ñ–∏–∫–∏ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏** YTM (Plotly)
- üìâ **–ê–Ω–∞–ª–∏–∑ —Å–ø—Ä–µ–¥–æ–≤** –º–µ–∂–¥—É –æ–±–ª–∏–≥–∞—Ü–∏—è–º–∏
- üéØ **–¢–æ—Ä–≥–æ–≤—ã–µ —Å–∏–≥–Ω–∞–ª—ã** (SELL_BUY / BUY_SELL / NEUTRAL)
- üìä **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–ø—Ä–µ–¥–∞** (–ø–µ—Ä—Ü–µ–Ω—Ç–∏–ª–∏, —Å—Ä–µ–¥–Ω–µ–µ, min/max)
- üîÑ **–ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** –¥–∞–Ω–Ω—ã—Ö
- üíæ **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** –¥–∞–Ω–Ω—ã—Ö (5 –º–∏–Ω—É—Ç)
- üé® **–í—ã–±–æ—Ä –æ–±–ª–∏–≥–∞—Ü–∏–π** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
ofz-analytics/
‚îú‚îÄ‚îÄ app.py                 # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ config.py              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ —Å–ø–∏—Å–æ–∫ –æ–±–ª–∏–≥–∞—Ü–∏–π
‚îú‚îÄ‚îÄ requirements.txt       # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îú‚îÄ‚îÄ moex_history.py   # –ü–æ–ª—É—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ moex_trading.py   # –°—Ç–∞—Ç—É—Å —Ç–æ—Ä–≥–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ moex_candles.py   # –í–Ω—É—Ç—Ä–∏–¥–Ω–µ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
‚îú‚îÄ‚îÄ core/
‚îÇ   ‚îú‚îÄ‚îÄ spread.py         # –†–∞—Å—á—ë—Ç —Å–ø—Ä–µ–¥–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ signals.py        # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ backtest.py       # –ë—ç–∫—Ç–µ—Å—Ç–∏–Ω–≥
‚îÇ   ‚îî‚îÄ‚îÄ ytm_calculator.py # –†–∞—Å—á—ë—Ç YTM
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îî‚îÄ‚îÄ charts.py         # –ì—Ä–∞—Ñ–∏–∫–∏ Plotly
‚îú‚îÄ‚îÄ modes/
‚îÇ   ‚îú‚îÄ‚îÄ base.py           # –î–Ω–µ–≤–Ω–æ–π —Ä–µ–∂–∏–º
‚îÇ   ‚îî‚îÄ‚îÄ intraday.py       # –í–Ω—É—Ç—Ä–∏–¥–Ω–µ–≤–Ω–æ–π —Ä–µ–∂–∏–º
‚îî‚îÄ‚îÄ export/
    ‚îú‚îÄ‚îÄ formatters.py     # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–æ–≤
    ‚îî‚îÄ‚îÄ signal_sender.py  # –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–∏–≥–Ω–∞–ª–æ–≤
```

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
pip install -r requirements.txt
```

## –ó–∞–ø—É—Å–∫

```bash
streamlit run app.py
```

## –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–≤–µ—Ä—Å–∏—è 2.0)

| –ü—Ä–æ–±–ª–µ–º–∞ | –†–µ—à–µ–Ω–∏–µ |
|----------|---------|
| –ù–µ–≤–µ—Ä–Ω—ã–µ ISIN –∫–æ–¥—ã | –í–æ–∑–≤—Ä–∞—â–µ–Ω—ã –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ ISIN –∏–∑ —Ä–∞–±–æ—á–µ–π –≤–µ—Ä—Å–∏–∏ |
| –ù–µ–≤–µ—Ä–Ω—ã–π URL API | –£–±—Ä–∞–Ω `/boards/{board}/` –∏–∑ URL |
| –ù–µ–≤–µ—Ä–Ω–æ–µ –ø–æ–ª–µ YTM | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: `YIELDCLOSE` –≤–º–µ—Å—Ç–æ `YIELDCOUPON` |
| –£–±—Ä–∞–Ω –≤—ã–±–æ—Ä –æ–±–ª–∏–≥–∞—Ü–∏–π | –í–æ–∑–≤—Ä–∞—â—ë–Ω –≤—ã–±–æ—Ä –≤ sidebar |

## –ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö

–î–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–∞—é—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ —Å API –ú–æ—Å–∫–æ–≤—Å–∫–æ–π –±–∏—Ä–∂–∏ (MOEX ISS):
- –¢–æ—Ä–≥–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ: `https://iss.moex.com/iss/engines/stock/markets/bonds/securities/{secid}.json`
- –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ: `https://iss.moex.com/iss/history/engines/stock/markets/bonds/securities/{secid}.json`

## –¢–æ—Ä–≥–æ–≤—ã–µ —Å–∏–≥–Ω–∞–ª—ã

| –°–∏–≥–Ω–∞–ª | –£—Å–ª–æ–≤–∏–µ | –î–µ–π—Å—Ç–≤–∏–µ |
|--------|---------|----------|
| SELL_BUY | –°–ø—Ä–µ–¥ < P25 | –ü—Ä–æ–¥–∞—Ç—å –û–±–ª–∏–≥–∞—Ü–∏—é 1, –ö—É–ø–∏—Ç—å –û–±–ª–∏–≥–∞—Ü–∏—é 2 |
| BUY_SELL | –°–ø—Ä–µ–¥ > P75 | –ö—É–ø–∏—Ç—å –û–±–ª–∏–≥–∞—Ü–∏—é 1, –ü—Ä–æ–¥–∞—Ç—å –û–±–ª–∏–≥–∞—Ü–∏—é 2 |
| NEUTRAL | P25 ‚â§ –°–ø—Ä–µ–¥ ‚â§ P75 | –£–¥–µ—Ä–∂–∏–≤–∞—Ç—å –ø–æ–∑–∏—Ü–∏–∏ |

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT
